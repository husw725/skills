/**
 * 游戏核心配置与地图数据
 */
export const TILE_SIZE = 32;
export const CANVAS_WIDTH = 512;
export const CANVAS_HEIGHT = 480;

// 瓦片类型定义
export const TILES = {
    EMPTY: 0,
    FLOOR: 1, // 室内地板
    WALL: 2,  // 墙壁
    GRASS: 3, // 草地/平原
    WATER: 4, // 水
    KING_THRONE: 5, // 王座
    DOOR: 6,  // 门
    DIRT: 7,  // 泥土路
    EXIT: 8,  // 出口/传送点
    MOUNTAIN: 10, // 山脉
    FOREST: 11,   // 森林
    TOWN: 12,     // 城镇图标
    CAVE: 13,     // 洞窟图标
    CHEST: 14     // 宝箱
};

// 基础等级经验表 (简化)
export const LEVEL_EXP = [0, 5, 12, 22, 35, 50, 70, 100, 150, 220, 300, 400, 500, 1000];

export const CASTLE_MAP = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 2, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 2],
    [2, 1, 2, 1, 5, 1, 2, 1, 1, 2, 1, 1, 1, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 3, 3, 3, 3, 3, 1, 1, 3, 3, 3, 3, 3, 3, 1],
    [1, 3, 1, 1, 1, 1, 3, 1, 1, 3, 1, 1, 1, 1, 3, 1],
    [1, 3, 1, 4, 4, 1, 3, 1, 1, 3, 1, 4, 4, 1, 3, 1],
    [1, 3, 1, 1, 1, 1, 3, 1, 1, 3, 1, 1, 1, 1, 3, 1],
    [1, 3, 3, 3, 3, 3, 3, 1, 1, 3, 3, 3, 3, 3, 3, 1],
    [1, 1, 1, 1, 1, 1, 1, 8, 8, 1, 1, 1, 1, 1, 1, 1],
    [2, 2, 2, 2, 2, 2, 2, 8, 8, 2, 2, 2, 2, 2, 2, 2]
];

export const TOWN_MAP = [
    [3, 3, 3, 3, 3, 3, 3, 8, 8, 3, 3, 3, 3, 3, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 7, 7, 3, 3, 3, 3, 3, 3, 3],
    [3, 2, 2, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 2, 2, 3],
    [3, 2, 1, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 1, 2, 3],
    [3, 2, 6, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 6, 2, 3],
    [3, 3, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 7, 7, 3, 3, 3, 3, 3, 3, 3],
    [3, 2, 2, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 2, 2, 3],
    [3, 2, 1, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 1, 2, 3],
    [3, 2, 6, 2, 3, 3, 3, 7, 7, 3, 3, 3, 2, 6, 2, 3],
    [3, 3, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 7, 7, 3, 3, 3, 3, 3, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 8, 8, 3, 3, 3, 3, 3, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 8, 8, 3, 3, 3, 3, 3, 3, 3],
    [3, 3, 3, 3, 3, 3, 3, 8, 8, 3, 3, 3, 3, 3, 3, 3]
];

export const WORLD_MAP = [
    [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10],
    [10, 3, 3, 3, 3, 3, 11, 13, 11, 3, 3, 3, 11, 11, 10, 10],
    [10, 3, 3, 3, 3, 3, 11, 11, 11, 3, 3, 3, 11, 11, 11, 10],
    [10, 11, 11, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 11, 11, 10],
    [10, 11, 11, 11, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 11, 10],
    [10, 3, 11, 11, 11, 3, 3, 3, 3, 3, 3, 4, 4, 3, 3, 10],
    [10, 3, 3, 11, 11, 3, 3, 3, 3, 4, 4, 4, 4, 4, 3, 10],
    [4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 11, 11, 4, 4, 4],
    [4, 4, 4, 3, 3, 3, 3, 3, 4, 11, 11, 11, 11, 3, 3, 4],
    [4, 4, 4, 4, 3, 3, 3, 3, 3, 11, 11, 3, 11, 3, 3, 4],
    [10, 4, 4, 4, 4, 3, 3, 3, 3, 3, 11, 3, 11, 3, 4, 4],
    [10, 10, 4, 4, 3, 3, 3, 12, 12, 3, 3, 11, 3, 3, 4, 4],
    [10, 10, 10, 3, 3, 3, 3, 12, 12, 3, 3, 3, 3, 4, 4, 10],
    [10, 10, 10, 10, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 10, 10],
    [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10]
];

export const CAVE_MAP = [
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 2, 14, 1, 2, 1, 2, 1, 1, 1, 1, 1, 2, 1, 2],
    [2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 2, 1, 2],
    [2, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2],
    [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
    [2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2],
    [2, 2, 2, 2, 2, 2, 2, 8, 8, 2, 2, 2, 2, 2, 2, 2],
    [2, 2, 2, 2, 2, 2, 2, 8, 8, 2, 2, 2, 2, 2, 2, 2]
];

export const MAPS = {
    'castle': {
        data: CASTLE_MAP,
        npcs: [
            { x: 4, y: 4, type: 'king', text: "国王：莱安啊，最近巴特兰的孩子们频繁失踪。\n请去北边调查，我听说那里有奇怪的妖气。" }
        ],
        teleports: [
            { x: 7, y: 13, targetMap: 'town', targetX: 7, targetY: 1 },
            { x: 8, y: 13, targetMap: 'town', targetX: 8, targetY: 1 },
            { x: 7, y: 14, targetMap: 'town', targetX: 7, targetY: 1 },
            { x: 8, y: 14, targetMap: 'town', targetX: 8, targetY: 1 }
        ]
    },
    'town': {
        data: TOWN_MAP,
        npcs: [
            { x: 3, y: 5, type: 'villager', text: "村民：听说北边的洞窟里有只叫荷伊明的史莱姆\n想变成人类，也许它能帮上忙。" },
            { x: 12, y: 5, type: 'villager', text: "妇女：我的孩子被抓去了带圆顶的塔里！\n但是没有飞天鞋根本进不去那座塔！呜呜..." }
        ],
        teleports: [
            { x: 7, y: 0, targetMap: 'castle', targetX: 7, targetY: 12 },
            { x: 8, y: 0, targetMap: 'castle', targetX: 8, targetY: 12 },
            { x: 7, y: 12, targetMap: 'world', targetX: 7, targetY: 13 },
            { x: 8, y: 12, targetMap: 'world', targetX: 8, targetY: 13 },
            { x: 7, y: 13, targetMap: 'world', targetX: 7, targetY: 13 },
            { x: 8, y: 13, targetMap: 'world', targetX: 8, targetY: 13 },
            { x: 7, y: 14, targetMap: 'world', targetX: 7, targetY: 13 },
            { x: 8, y: 14, targetMap: 'world', targetX: 8, targetY: 13 }
        ]
    },
    'world': {
        data: WORLD_MAP,
        isWorld: true,
        npcs: [],
        teleports: [
            { x: 7, y: 11, targetMap: 'town', targetX: 7, targetY: 11 },
            { x: 8, y: 11, targetMap: 'town', targetX: 8, targetY: 11 },
            { x: 7, y: 12, targetMap: 'town', targetX: 7, targetY: 11 },
            { x: 8, y: 12, targetMap: 'town', targetX: 8, targetY: 11 },
            { x: 7, y: 1, targetMap: 'cave', targetX: 8, targetY: 12 }
        ]
    },
    'cave': {
        data: CAVE_MAP,
        npcs: [
            { x: 10, y: 1, type: 'healie', text: "荷伊明：我也想变成人类！\n你能带我一起走吗？我会在战斗中为你回血的！\n(荷伊明加入了队伍！)", event: 'join_healie' },
            { x: 3, y: 3, type: 'chest', text: "打开了宝箱！\n发现了关键道具：飞天鞋！\n现在可以使用飞天鞋进入Boss塔了！", event: 'get_shoes' },
            { x: 1, y: 1, type: 'boss', text: "大眼珠怪（皮萨罗的手下）：\n嘎嘎嘎！找到这里来了吗人类！\n孩子们的灵魂我要献给进化秘法！受死吧！", event: 'start_boss' }
        ],
        teleports: [
            { x: 7, y: 13, targetMap: 'world', targetX: 7, targetY: 2 },
            { x: 8, y: 13, targetMap: 'world', targetX: 7, targetY: 2 },
            { x: 7, y: 14, targetMap: 'world', targetX: 7, targetY: 2 },
            { x: 8, y: 14, targetMap: 'world', targetX: 7, targetY: 2 }
        ]
    }
};

export const MONSTERS = [
    { name: '史莱姆', hp: 8, str: 5, def: 2, exp: 2, gold: 2, color: '#00f' },
    { name: '大蚯蚓', hp: 12, str: 6, def: 3, exp: 3, gold: 4, color: '#8b4513' },
    { name: '多拉奇', hp: 10, str: 7, def: 1, exp: 3, gold: 3, color: '#800080' }
];

export const BOSS = { name: '大眼珠怪', hp: 50, str: 14, def: 8, exp: 50, gold: 100, color: '#ff4500', isBoss: true };
